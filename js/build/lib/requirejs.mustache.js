/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
define(function(){var a=typeof module!="undefined"&&module.exports||{};return function(a){function b(a){return r.test(a)}function c(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return v[a]||a})}function d(a,b,c,d){d=d||"<template>";var e=b.split("\n"),f=Math.max(c-3,0),g=Math.min(e.length,c+3),h=e.slice(f,g),i;for(var j=0,k=h.length;j<k;++j)i=j+f+1,h[j]=(i===c?" >> ":"    ")+h[j];return a.template=b,a.line=c,a.file=d,a.message=[d+":"+c,h.join("\n"),"",a.message].join("\n"),a}function e(a,b,c){if(a===".")return b[b.length-1];var d=a.split("."),e=d.length-1,f=d[e],g,h,i=b.length,j,k;while(i){k=b.slice(0),h=b[--i],j=0;while(j<e){h=h[d[j++]];if(h==null)break;k.push(h)}if(h&&f in h){g=h[f];break}}return typeof g=="function"&&(g=g.call(k[k.length-1])),g==null?c:g}function f(a,b,c,d){var f="",g=e(a,b);if(d){if(g==null||g===!1||p(g)&&g.length===0)f+=c()}else if(p(g))q(g,function(a){b.push(a),f+=c(),b.pop()});else if(typeof g=="object")b.push(g),f+=c(),b.pop();else if(typeof g=="function"){var h=b[b.length-1],i=function(a){return k(a,h)};f+=g.call(h,c(),i)||""}else g&&(f+=c());return f}function g(c,e){e=e||{};var f=e.tags||a.tags,g=f[0],h=f[f.length-1],i=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],j=[],k=!1,l=!1,m=function(){if(k&&!l&&!e.space)while(j.length)i.splice(j.pop(),1);else j=[];k=!1,l=!1},n=[],o,p,q,r=function(a){f=s(a).split(/\s+/),p=f[0],q=f[f.length-1]},t=function(a){i.push('";',o,'\nvar partial = partials["'+s(a)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},u=function(a,b){var f=s(a);if(f==="")throw d(new Error("Section name may not be empty"),c,z,e.file);n.push({name:f,inverted:b}),i.push('";',o,'\nvar name = "'+f+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},v=function(a){u(a,!0)},w=function(a){var b=s(a),f=n.length!=0&&n[n.length-1].name;if(!f||b!=f)throw d(new Error('Section named "'+b+'" was never opened'),c,z,e.file);var g=n.pop();i.push('";',"\n    return buffer;","\n  };","\n})();"),g.inverted?i.push("\nbuffer += renderSection(name,stack,callback,true);"):i.push("\nbuffer += renderSection(name,stack,callback);"),i.push('\nbuffer += "')},x=function(a){i.push('";',o,'\nbuffer += lookup("'+s(a)+'",stack,"");','\nbuffer += "')},y=function(a){i.push('";',o,'\nbuffer += escapeHTML(lookup("'+s(a)+'",stack,""));','\nbuffer += "')},z=1,A,B;for(var C=0,D=c.length;C<D;++C)if(c.slice(C,C+g.length)===g){C+=g.length,A=c.substr(C,1),o="\nline = "+z+";",p=g,q=h,k=!0;switch(A){case"!":C++,B=null;break;case"=":C++,h="="+h,B=r;break;case">":C++,B=t;break;case"#":C++,B=u;break;case"^":C++,B=v;break;case"/":C++,B=w;break;case"{":h="}"+h;case"&":C++,l=!0,B=x;break;default:l=!0,B=y}var E=c.indexOf(h,C);if(E===-1)throw d(new Error('Tag "'+g+'" was not closed properly'),c,z,e.file);var F=c.substring(C,E);B&&B(F);var G=0;while(~(G=F.indexOf("\n",G)))z++,G++;C=E+h.length-1,g=p,h=q}else{A=c.substr(C,1);switch(A){case'"':case"\\":l=!0,i.push("\\"+A);break;case"\r":break;case"\n":j.push(i.length),i.push("\\n"),m(),z++;break;default:b(A)?j.push(i.length):l=!0,i.push(A)}}if(n.length!=0)throw d(new Error('Section "'+n[n.length-1].name+'" was not closed properly'),c,z,e.file);m(),i.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var H=i.join("").replace(/buffer \+= "";\n/g,"");return e.debug&&(typeof console!="undefined"&&console.log?console.log(H):typeof print=="function"&&print(H)),H}function h(a,b){var h="view,partials,stack,lookup,escapeHTML,renderSection,render",i=g(a,b),j=new Function(h,i);return function(g,h){h=h||{};var i=[g];try{return j(g,h,i,e,c,f,k)}catch(l){throw d(l.error,a,l.line,b.file)}}}function i(){w={}}function j(a,b){return b=b||{},b.cache!==!1?(w[a]||(w[a]=h(a,b)),w[a]):h(a,b)}function k(a,b,c){return j(a)(b,c)}a.name="mustache.js",a.version="0.5.0-dev",a.tags=["{{","}}"],a.parse=g,a.compile=j,a.render=k,a.clearCache=i,a.to_html=function(a,b,c,d){var e=k(a,b,c);if(typeof d=="function")d(e);else return e};var l=Object.prototype.toString,m=Array.isArray,n=Array.prototype.forEach,o=String.prototype.trim,p;m?p=m:p=function(a){return l.call(a)==="[object Array]"};var q;n?q=function(a,b,c){return n.call(a,b,c)}:q=function(a,b,c){for(var d=0,e=a.length;d<e;++d)b.call(c,a[d],d,a)};var r=/^\s*$/,s;if(o)s=function(a){return a==null?"":o.call(a)};else{var t,u;b("Â ")?(t=/^\s+/,u=/\s+$/):(t=/^[\s\xA0]+/,u=/[\s\xA0]+$/),s=function(a){return a==null?"":String(a).replace(t,"").replace(u,"")}}var v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},w={}}(a),a})